<!DOCTYPE html>
<html lang="en">
<!--
<link href=
"http://netdna.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"
rel="stylesheet">
-->
<link href=
"http://netdna.bootstrapcdn.com/bootswatch/3.3.5/yeti/bootstrap.min.css"
rel="stylesheet">


<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="{{  url_for('viewlog_index') }}">Logviewer</a>
    </div>

    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li {% if request.path == "/viewlog/me" %}class="active"{% endif %}><a href="{{ url_for('viewlog',id='me') }}">Me <span class="sr-only">(current)</span></a></li>
        <li {% if request.path == "/viewlog/full" %}class="active"{% endif %}><a href="{{ url_for('viewlog',id='full') }}">Full logs</a></li>
        <li {% if request.path == "/viewlog/error" %}class="active"{% endif %}><a href="{{ url_for('viewlog',id='error') }}">Error</a></li>
      </ul>
      <form class="navbar-form navbar-left" role="search" method="POST">
        <div class="form-group">
          <input class="form-control" placeholder="Search & with regex" type="text" name='text'>
        </div>
        <button type="submit" class="btn btn-default">Submit</button>
      </form>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="mailto:chen.yan@epfl.ch">Like it !</a></li>
      </ul>
    </div>
  </div>
</nav>

<title>Hugo Server's Logs</title>
<blockquote>
  <p class="text-success">IP地址: {{ ip }}, 来自: {{ loc }}.</p>
  <small>{{ UA }}</small>
</blockquote>
<p><strong>...找到{{ logs|length }}条相关日志, 过滤条件: </strong> <abbr title="Current search condition">'{{ key }}'</abbr></p>


<table class="table table-striped table-hover ">
  <thead>
    <tr>
      <th>#</th>
      <th>Time</th>
      <th>Type</th>
      <th>Message</th>
    </tr>
  </thead>
  <tbody>
    {% for line in logs %}
        {% if line[1]=='ERROR' %}
            <tr class="danger">
        {% elif line[1]=='WARNING' %}
            <tr class="warning">
        {% else %}
            <tr>
        {% endif %}
              <td>{{ loop.index }}</td>
              <td>{{line[0]}}</td>
              <td>{{line[1]}}</td>
              <td>{{line[2]}}</td>
            </tr>
    {% endfor %}
  </tbody>
</table> 

</html>